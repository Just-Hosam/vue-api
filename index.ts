const products = [
  {
    product: "Macbook Air 13 inch(2020 ) For Sale",
    serial: "KH9212924",
    id: 9374,
    quantity: 134,
    total: 779.58,
    status: "Active",
    image: "https://picsum.photos/200/300",
  },
  {
    product: "Dell XPS 15",
    serial: "AB1234XYZ",
    id: 1235,
    quantity: 50,
    total: 1299.99,
    status: "Inactive",
  },
  {
    product: "Lenovo ThinkPad mac X1 Carbon",
    serial: "X1C12345",
    id: 1236,
    quantity: 100,
    total: 1499.99,
    status: "Pending",
  },
  {
    product: "HP Elite Dragonfly",
    serial: "ELITE12345",
    id: 1237,
    quantity: 200,
    total: 1999.99,
    status: "Blocked",
  },
  {
    product: "Microsoft Surface Laptop 3",
    serial: "SURFACE12345",
    id: 1238,
    quantity: 150,
    total: 999.99,
    status: "Active",
  },
  {
    product: "Product 1",
    serial: "SERIAL001",
    id: 1239,
    quantity: 100,
    total: 100.0,
    status: "Active",
  },
  {
    product: "Product 2",
    serial: "SERIAL002",
    id: 1240,
    quantity: 100,
    total: 200.0,
    status: "Active",
  },
  {
    product: "Product 3",
    serial: "SERIAL003",
    id: 1241,
    quantity: 100,
    total: 300.0,
    status: "Active",
  },
  {
    product: "Product 4",
    serial: "SERIAL004",
    id: 1242,
    quantity: 100,
    total: 400.0,
    status: "Active",
  },
  {
    product: "Product 5",
    serial: "SERIAL005",
    id: 1243,
    quantity: 100,
    total: 500.0,
    status: "Active",
  },
  {
    product: "Product 6",
    serial: "SERIAL006",
    id: 1244,
    quantity: 100,
    total: 600.0,
    status: "Active",
  },
  {
    product: "Product 7",
    serial: "SERIAL007",
    id: 1245,
    quantity: 100,
    total: 700.0,
    status: "Active",
  },
  {
    product: "Product 8",
    serial: "SERIAL008",
    id: 1246,
    quantity: 100,
    total: 800.0,
    status: "Active",
  },
  {
    product: "Product 9",
    serial: "SERIAL009",
    id: 1247,
    quantity: 100,
    total: 900.0,
    status: "Active",
  },
  {
    product: "Product 10",
    serial: "SERIAL010",
    id: 1248,
    quantity: 100,
    total: 1000.0,
    status: "Active",
  },
  {
    product: "Product 11",
    serial: "SERIAL011",
    id: 1249,
    quantity: 100,
    total: 1100.0,
    status: "Active",
  },
  {
    product: "Product 12",
    serial: "SERIAL012",
    id: 1250,
    quantity: 100,
    total: 1200.0,
    status: "Active",
  },
  {
    product: "Product 13",
    serial: "SERIAL013",
    id: 1251,
    quantity: 100,
    total: 1300.0,
    status: "Active",
  },
  {
    product: "Product 14",
    serial: "SERIAL014",
    id: 1252,
    quantity: 100,
    total: 1400.0,
    status: "Active",
  },
  {
    product: "Product 15",
    serial: "SERIAL015",
    id: 1253,
    quantity: 100,
    total: 1500.0,
    status: "Active",
  },
  {
    product: "Product 16",
    serial: "SERIAL016",
    id: 1254,
    quantity: 100,
    total: 1600.0,
    status: "Active",
  },
  {
    product: "Product 17",
    serial: "SERIAL017",
    id: 1255,
    quantity: 100,
    total: 1700.0,
    status: "Active",
  },
  {
    product: "Product 18",
    serial: "SERIAL018",
    id: 1256,
    quantity: 100,
    total: 1800.0,
    status: "Active",
  },
  {
    product: "Product 19",
    serial: "SERIAL019",
    id: 1257,
    quantity: 100,
    total: 1900.0,
    status: "Active",
  },
  {
    product: "Product 20",
    serial: "SERIAL020",
    id: 1258,
    quantity: 100,
    total: 2000.0,
    status: "Active",
  },
  {
    product: "Product 21",
    serial: "SERIAL021",
    id: 1259,
    quantity: 100,
    total: 2100.0,
    status: "Active",
  },
  {
    product: "Product 22",
    serial: "SERIAL022",
    id: 1260,
    quantity: 100,
    total: 2200.0,
    status: "Active",
  },
  {
    product: "Product 23",
    serial: "SERIAL023",
    id: 1261,
    quantity: 100,
    total: 2300.0,
    status: "Active",
  },
  {
    product: "Product 24",
    serial: "SERIAL024",
    id: 1262,
    quantity: 100,
    total: 2400.0,
    status: "Active",
  },
  {
    product: "Product 25",
    serial: "SERIAL025",
    id: 1263,
    quantity: 100,
    total: 2500.0,
    status: "Active",
  },
  {
    product: "Product 26",
    serial: "SERIAL026",
    id: 1264,
    quantity: 100,
    total: 2600.0,
    status: "Active",
  },
  {
    product: "Product 27",
    serial: "SERIAL027",
    id: 1265,
    quantity: 100,
    total: 2700.0,
    status: "Active",
  },
  {
    product: "Product 28",
    serial: "SERIAL028",
    id: 1266,
    quantity: 100,
    total: 2800.0,
    status: "Active",
  },
  {
    product: "Product 29",
    serial: "SERIAL029",
    id: 1267,
    quantity: 100,
    total: 2900.0,
    status: "Active",
  },
  {
    product: "Product 30",
    serial: "SERIAL030",
    id: 1268,
    quantity: 100,
    total: 3000.0,
    status: "Active",
  },
  {
    product: "Product 31",
    serial: "SERIAL031",
    id: 1269,
    quantity: 100,
    total: 3100.0,
    status: "Active",
  },
  {
    product: "Product 32",
    serial: "SERIAL032",
    id: 1270,
    quantity: 100,
    total: 3200.0,
    status: "Active",
  },
  {
    product: "Product 33",
    serial: "SERIAL033",
    id: 1271,
    quantity: 100,
    total: 3300.0,
    status: "Active",
  },
  {
    product: "Product 34",
    serial: "SERIAL034",
    id: 1272,
    quantity: 100,
    total: 3400.0,
    status: "Active",
  },
  {
    product: "Product 35",
    serial: "SERIAL035",
    id: 1273,
    quantity: 100,
    total: 3500.0,
    status: "Active",
  },
  {
    product: "Product 36",
    serial: "SERIAL036",
    id: 1274,
    quantity: 100,
    total: 3600.0,
    status: "Active",
  },
  {
    product: "Product 37",
    serial: "SERIAL037",
    id: 1275,
    quantity: 100,
    total: 3700.0,
    status: "Active",
  },
  {
    product: "Product 38",
    serial: "SERIAL038",
    id: 1276,
    quantity: 100,
    total: 3800.0,
    status: "Active",
  },
  {
    product: "Product 39",
    serial: "SERIAL039",
    id: 1277,
    quantity: 100,
    total: 3900.0,
    status: "Active",
  },
  {
    product: "Product 40",
    serial: "SERIAL040",
    id: 1278,
    quantity: 100,
    total: 4000.0,
    status: "Active",
  },
  {
    product: "Product 41",
    serial: "SERIAL041",
    id: 1279,
    quantity: 100,
    total: 4100.0,
    status: "Active",
  },
  {
    product: "Product 42",
    serial: "SERIAL042",
    id: 1280,
    quantity: 100,
    total: 4200.0,
    status: "Active",
  },
  {
    product: "Product 43",
    serial: "SERIAL043",
    id: 1281,
    quantity: 100,
    total: 4300.0,
    status: "Active",
  },
  {
    product: "Product 44",
    serial: "SERIAL044",
    id: 1282,
    quantity: 100,
    total: 4400.0,
    status: "Active",
  },
  {
    product: "Product 45",
    serial: "SERIAL045",
    id: 1283,
    quantity: 100,
    total: 4500.0,
    status: "Active",
  },
  {
    product: "Product 46",
    serial: "SERIAL046",
    id: 1284,
    quantity: 100,
    total: 4600.0,
    status: "Active",
  },
  {
    product: "Product 47",
    serial: "SERIAL047",
    id: 1285,
    quantity: 100,
    total: 4700.0,
    status: "Active",
  },
  {
    product: "Product 48",
    serial: "SERIAL048",
    id: 1286,
    quantity: 100,
    total: 4800.0,
    status: "Active",
  },
  {
    product: "Product 49",
    serial: "SERIAL049",
    id: 1287,
    quantity: 100,
    total: 4900.0,
    status: "Active",
  },
  {
    product: "Product 50",
    serial: "SERIAL050",
    id: 1288,
    quantity: 100,
    total: 5000.0,
    status: "Active",
  },
  {
    product: "Product 51",
    serial: "SERIAL051",
    id: 1289,
    quantity: 100,
    total: 5100.0,
    status: "Active",
  },
  {
    product: "Product 52",
    serial: "SERIAL052",
    id: 1290,
    quantity: 100,
    total: 5200.0,
    status: "Active",
  },
  {
    product: "Product 53",
    serial: "SERIAL053",
    id: 1291,
    quantity: 100,
    total: 5300.0,
    status: "Active",
  },
  {
    product: "Product 54",
    serial: "SERIAL054",
    id: 1292,
    quantity: 100,
    total: 5400.0,
    status: "Active",
  },
  {
    product: "Product 55",
    serial: "SERIAL055",
    id: 1293,
    quantity: 100,
    total: 5500.0,
    status: "Active",
  },
  {
    product: "Product 56",
    serial: "SERIAL056",
    id: 1294,
    quantity: 100,
    total: 5600.0,
    status: "Active",
  },
  {
    product: "Product 57",
    serial: "SERIAL057",
    id: 1295,
    quantity: 100,
    total: 5700.0,
    status: "Active",
  },
  {
    product: "Product 58",
    serial: "SERIAL058",
    id: 1296,
    quantity: 100,
    total: 5800.0,
    status: "Active",
  },
  {
    product: "Product 59",
    serial: "SERIAL059",
    id: 1297,
    quantity: 100,
    total: 5900.0,
    status: "Active",
  },
  {
    product: "Product 60",
    serial: "SERIAL060",
    id: 1298,
    quantity: 100,
    total: 6000.0,
    status: "Active",
  },
  {
    product: "Product 61",
    serial: "SERIAL061",
    id: 1299,
    quantity: 100,
    total: 6100.0,
    status: "Active",
  },
  {
    product: "Product 62",
    serial: "SERIAL062",
    id: 1300,
    quantity: 100,
    total: 6200.0,
    status: "Active",
  },
  {
    product: "Product 63",
    serial: "SERIAL063",
    id: 1301,
    quantity: 100,
    total: 6300.0,
    status: "Active",
  },
  {
    product: "Product 64",
    serial: "SERIAL064",
    id: 1302,
    quantity: 100,
    total: 6400.0,
    status: "Active",
  },
  {
    product: "Product 65",
    serial: "SERIAL065",
    id: 1303,
    quantity: 100,
    total: 6500.0,
    status: "Active",
  },
  {
    product: "Product 66",
    serial: "SERIAL066",
    id: 1304,
    quantity: 100,
    total: 6600.0,
    status: "Active",
  },
  {
    product: "Product 67",
    serial: "SERIAL067",
    id: 1305,
    quantity: 100,
    total: 6700.0,
    status: "Active",
  },
  {
    product: "Product 68",
    serial: "SERIAL068",
    id: 1306,
    quantity: 100,
    total: 6800.0,
    status: "Active",
  },
  {
    product: "Product 69",
    serial: "SERIAL069",
    id: 1307,
    quantity: 100,
    total: 6900.0,
    status: "Active",
  },
  {
    product: "Product 70",
    serial: "SERIAL070",
    id: 1308,
    quantity: 100,
    total: 7000.0,
    status: "Active",
  },
  {
    product: "Product 71",
    serial: "SERIAL071",
    id: 1309,
    quantity: 100,
    total: 7100.0,
    status: "Active",
  },
  {
    product: "Product 72",
    serial: "SERIAL072",
    id: 1310,
    quantity: 100,
    total: 7200.0,
    status: "Active",
  },
  {
    product: "Product 73",
    serial: "SERIAL073",
    id: 1311,
    quantity: 100,
    total: 7300.0,
    status: "Active",
  },
  {
    product: "Product 74",
    serial: "SERIAL074",
    id: 1312,
    quantity: 100,
    total: 7400.0,
    status: "Active",
  },
  {
    product: "Product 75",
    serial: "SERIAL075",
    id: 1313,
    quantity: 100,
    total: 7500.0,
    status: "Active",
  },
  {
    product: "Product 76",
    serial: "SERIAL076",
    id: 1314,
    quantity: 100,
    total: 7600.0,
    status: "Active",
  },
  {
    product: "Product 77",
    serial: "SERIAL077",
    id: 1315,
    quantity: 100,
    total: 7700.0,
    status: "Active",
  },
  {
    product: "Product 78",
    serial: "SERIAL078",
    id: 1316,
    quantity: 100,
    total: 7800.0,
    status: "Active",
  },
  {
    product: "Product 79",
    serial: "SERIAL079",
    id: 1317,
    quantity: 100,
    total: 7900.0,
    status: "Active",
  },
  {
    product: "Product 80",
    serial: "SERIAL080",
    id: 1318,
    quantity: 100,
    total: 8000.0,
    status: "Active",
  },
  {
    product: "Product 81",
    serial: "SERIAL081",
    id: 1319,
    quantity: 100,
    total: 8100.0,
    status: "Active",
  },
  {
    product: "Product 82",
    serial: "SERIAL082",
    id: 1320,
    quantity: 100,
    total: 8200.0,
    status: "Active",
  },
  {
    product: "Product 83",
    serial: "SERIAL083",
    id: 1321,
    quantity: 100,
    total: 8300.0,
    status: "Active",
  },
  {
    product: "Product 84",
    serial: "SERIAL084",
    id: 1322,
    quantity: 100,
    total: 8400.0,
    status: "Active",
  },
  {
    product: "Product 85",
    serial: "SERIAL085",
    id: 1323,
    quantity: 100,
    total: 8500.0,
    status: "Active",
  },
  {
    product: "Product 86",
    serial: "SERIAL086",
    id: 1324,
    quantity: 100,
    total: 8600.0,
    status: "Active",
  },
  {
    product: "Product 87",
    serial: "SERIAL087",
    id: 1325,
    quantity: 100,
    total: 8700.0,
    status: "Active",
  },
  {
    product: "Product 88",
    serial: "SERIAL088",
    id: 1326,
    quantity: 100,
    total: 8800.0,
    status: "Active",
  },
  {
    product: "Product 89",
    serial: "SERIAL089",
    id: 1327,
    quantity: 100,
    total: 8900.0,
    status: "Active",
  },
  {
    product: "Product 90",
    serial: "SERIAL090",
    id: 1328,
    quantity: 100,
    total: 9000.0,
    status: "Active",
  },
  {
    product: "Product 91",
    serial: "SERIAL091",
    id: 1329,
    quantity: 100,
    total: 9100.0,
    status: "Active",
  },
  {
    product: "Product 92",
    serial: "SERIAL092",
    id: 1330,
    quantity: 100,
    total: 9200.0,
    status: "Active",
  },
  {
    product: "Product 93",
    serial: "SERIAL093",
    id: 1331,
    quantity: 100,
    total: 9300.0,
    status: "Active",
  },
  {
    product: "Product 94",
    serial: "SERIAL094",
    id: 1332,
    quantity: 100,
    total: 9400.0,
    status: "Active",
  },
  {
    product: "Product 95",
    serial: "SERIAL095",
    id: 1333,
    quantity: 100,
    total: 9500.0,
    status: "Active",
  },
  {
    product: "Product 96",
    serial: "SERIAL096",
    id: 1334,
    quantity: 100,
    total: 9600.0,
    status: "Active",
  },
  {
    product: "Product 97",
    serial: "SERIAL097",
    id: 1335,
    quantity: 100,
    total: 9700.0,
    status: "Active",
  },
  {
    product: "Product 98",
    serial: "SERIAL098",
    id: 1336,
    quantity: 100,
    total: 9800.0,
    status: "Active",
  },
  {
    product: "Product 99",
    serial: "SERIAL099",
    id: 1337,
    quantity: 100,
    total: 9900.0,
    status: "Active",
  },
  {
    product: "Product 100",
    serial: "SERIAL100",
    id: 1338,
    quantity: 100,
    total: 10000.0,
    status: "Active",
  },
]

const express = require("express")
const cors = require("cors")

const app = express()
const corsOptions = {
  origin: ["http://localhost:5173", "https://vue-structure.vercel.app"],
  optionsSuccessStatus: 200,
}

app.use(cors(corsOptions))
const PORT = 3000

app.get("/products", (req, res) => {
  const page = parseInt(req.query.page) || 1
  const limit = parseInt(req.query.limit) || 200
  const sortField = req.query.sortField || "id"
  const sortOrder = req.query.sortOrder === "desc" ? "desc" : "asc"
  const searchQuery = req.query.search || ""

  // Filtering
  let filtered = products.filter((p) =>
    p.product.toLowerCase().includes(searchQuery.toLowerCase())
  )

  // Sorting
  let sorted = filtered.sort((a, b) => {
    const valA = a[sortField]
    const valB = b[sortField]

    // Compare strings or numbers
    if (typeof valA === "string") {
      return sortOrder === "asc"
        ? valA.localeCompare(valB)
        : valB.localeCompare(valA)
    } else {
      return sortOrder === "asc" ? valA - valB : valB - valA
    }
  })

  // Pagination
  const startIndex = (page - 1) * limit
  const endIndex = startIndex + limit
  const paginated = sorted.slice(startIndex, endIndex)

  res.json({
    page,
    limit,
    total: products.length,
    queryCount: filtered.length,
    data: paginated,
  })
})

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`)
})
